---
import Layout from '../layouts/Layout.astro';
---

<Layout 
    title="Calcora API Documentation | REST API Reference" 
    description="Complete REST API reference for developers integrating Calcora into their applications."
    currentPage="docs-api"
>
    <main style="padding: 2rem; max-width: 1200px; margin: 0 auto;">
        <h1 style="margin-bottom: 0.5rem;">
            <i class="fas fa-code"></i> API Documentation
        </h1>
        <p style="color: var(--text-secondary); margin-bottom: 2rem;">
            Complete REST API reference for developers integrating Calcora into their applications.
        </p>

        <!-- Getting Started -->
        <section>
            <h2><i class="fas fa-rocket"></i> Getting Started</h2>
            <p>Calcora provides a REST API for all mathematical operations. The API is available at:</p>
            <pre><code>https://calcoralive.netlify.app/api/v1/</code></pre>
            
            <p>For local development or self-hosting:</p>
            <pre><code>http://localhost:5000/api/v1/</code></pre>

            <h3>Installation (Python Package)</h3>
            <pre><code>pip install calcora</code></pre>

            <h3>Quick Start (Desktop App)</h3>
            <p>Download the <a href="https://github.com/Dumbo-programmer/Calcora/releases/latest/download/Calcora.exe">Windows Desktop App</a> which includes a built-in API server.</p>
        </section>

        <!-- Differentiation Endpoint -->
        <section>
            <h2><i class="fas fa-function"></i> Differentiation</h2>
            
            <div class="endpoint">
                <h3>
                    <span class="http-method method-post">POST</span>
                    <code>/api/v1/differentiate</code>
                </h3>
                <p>Compute the derivative of a mathematical expression with step-by-step explanation.</p>

                <h4>Request Body</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>expression</code></td>
                            <td>string</td>
                            <td><span class="required">REQUIRED</span></td>
                            <td>Mathematical expression (e.g., <code>"x**2 + 3*x"</code>)</td>
                        </tr>
                        <tr>
                            <td><code>variable</code></td>
                            <td>string</td>
                            <td>optional</td>
                            <td>Variable to differentiate with respect to (default: <code>"x"</code>)</td>
                        </tr>
                        <tr>
                            <td><code>verbosity</code></td>
                            <td>string</td>
                            <td>optional</td>
                            <td>Detail level: <code>"concise"</code>, <code>"detailed"</code>, or <code>"teacher"</code>)</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Example Request</h4>
                <pre><code>curl -X POST https://calcoralive.netlify.app/api/v1/differentiate \
  -H "Content-Type: application/json" \
  -d '&#123;
    "expression": "sin(x)*x**2",
    "variable": "x",
    "verbosity": "detailed"
  &#125;'</code></pre>

                <h4>Example Response</h4>
                <pre><code>&#123;
  "result": "x**2*cos(x) + 2*x*sin(x)",
  "steps": [
    &#123;
      "step": 1,
      "rule": "product_rule",
      "input": "sin(x)*x**2",
      "output": "sin(x)*Derivative(x**2, x) + x**2*Derivative(sin(x), x)",
      "explanation": "Apply product rule: d/dx[f·g] = f·g' + g·f'"
    &#125;
  ],
  "metadata": &#123;
    "operation": "differentiate",
    "input_expression": "sin(x)*x**2",
    "variable": "x"
  &#125;
&#125;</code></pre>
            </div>
        </section>

        <!-- Integration Endpoint -->
        <section>
            <h2><i class="fas fa-integral"></i> Integration</h2>
            
            <div class="endpoint">
                <h3>
                    <span class="http-method method-post">POST</span>
                    <code>/api/v1/integrate</code>
                </h3>
                <p>Compute indefinite or definite integrals with step-by-step explanation and graphical visualization.</p>

                <h4>Request Body</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>expression</code></td>
                            <td>string</td>
                            <td><span class="required">REQUIRED</span></td>
                            <td>Mathematical expression to integrate (e.g., <code>"x**2"</code>, <code>"sin(x)"</code>)</td>
                        </tr>
                        <tr>
                            <td><code>variable</code></td>
                            <td>string</td>
                            <td>optional</td>
                            <td>Variable to integrate with respect to (default: <code>"x"</code>)</td>
                        </tr>
                        <tr>
                            <td><code>lower_limit</code></td>
                            <td>number</td>
                            <td>optional</td>
                            <td>Lower bound for definite integral</td>
                        </tr>
                        <tr>
                            <td><code>upper_limit</code></td>
                            <td>number</td>
                            <td>optional</td>
                            <td>Upper bound for definite integral</td>
                        </tr>
                        <tr>
                            <td><code>verbosity</code></td>
                            <td>string</td>
                            <td>optional</td>
                            <td>Detail level: <code>"concise"</code>, <code>"detailed"</code>, or <code>"teacher"</code></td>
                        </tr>
                        <tr>
                            <td><code>generate_graph</code></td>
                            <td>boolean</td>
                            <td>optional</td>
                            <td>Include graph data for visualization (default: <code>true</code>)</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Example: Indefinite Integral</h4>
                <pre><code>curl -X POST https://calcoralive.netlify.app/api/v1/integrate \
  -H "Content-Type: application/json" \
  -d '&#123;
    "expression": "x**2",
    "variable": "x",
    "verbosity": "detailed"
  &#125;'</code></pre>

                <h4>Response</h4>
                <pre><code>&#123;
  "result": "x**3/3 + C",
  "definite": false,
  "steps": [
    &#123;
      "rule": "power_rule",
      "explanation": "Apply power rule: ∫x^n dx = x^(n+1)/(n+1) + C",
      "before": "x**2",
      "after": "x**3/3"
    &#125;
  ],
  "technique": "power_rule",
  "can_integrate": true
&#125;</code></pre>

                <h4>Example: Definite Integral</h4>
                <pre><code>curl -X POST https://calcoralive.netlify.app/api/v1/integrate \
  -H "Content-Type: application/json" \
  -d '&#123;
    "expression": "x**2",
    "variable": "x",
    "lower_limit": 0,
    "upper_limit": 2,
    "generate_graph": true
  &#125;'</code></pre>

                <h4>Response</h4>
                <pre><code>&#123;
  "result": "8/3",
  "definite": true,
  "limits": [0, 2],
  "steps": [...],
  "graph": &#123;
    "data": &#123;
      "x_values": [-2, -1.99, ..., 3.99, 4],
      "integrand_curve": [4, 3.96, ..., 15.92, 16],
      "antiderivative_curve": [0, 0.027, ..., 18.67, 21.33],
      "area": &#123;
        "x": [0, 0.01, ..., 1.99, 2],
        "y": [0, 0.0001, ..., 3.96, 4],
        "value": 2.666666666666667
      &#125;
    &#125;,
    "labels": &#123;
      "integrand": "f(x) = x**2",
      "antiderivative": "F(x) = ∫ f(x) dx"
    &#125;,
    "limits": &#123;"lower": 0, "upper": 2&#125;
  &#125;
&#125;</code></pre>

                <div class="info-box">
                    <strong>Supported Techniques:</strong>
                    <ul style="margin-top: 0.5rem;">
                        <li>Power rule for polynomials</li>
                        <li>Trigonometric integrals (sin, cos, tan, sec, csc, cot)</li>
                        <li>Exponential and logarithmic functions</li>
                        <li>Integration by parts</li>
                        <li>U-substitution (chain rule)</li>
                        <li>Partial fractions for rational functions</li>
                        <li>Trigonometric substitution</li>
                        <li>Hyperbolic functions</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Matrix Operations -->
        <section>
            <h2><i class="fas fa-th"></i> Matrix Operations</h2>
            
            <div class="endpoint">
                <h3>
                    <span class="http-method method-post">POST</span>
                    <code>/api/v1/matrix/determinant</code>
                </h3>
                <p>Compute the determinant of a square matrix with step-by-step explanation.</p>

                <h4>Request Body</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>matrix</code></td>
                            <td>array[][]</td>
                            <td><span class="required">REQUIRED</span></td>
                            <td>2D array representing the matrix</td>
                        </tr>
                        <tr>
                            <td><code>verbosity</code></td>
                            <td>string</td>
                            <td>optional</td>
                            <td>Detail level for steps</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Example Request</h4>
                <pre><code>curl -X POST https://calcoralive.netlify.app/api/v1/matrix/determinant \
  -H "Content-Type: application/json" \
  -d '&#123;
    "matrix": [[3, 8], [4, 6]],
    "verbosity": "detailed"
  &#125;'</code></pre>

                <h4>Example Response</h4>
                <pre><code>&#123;
  "operation": "determinant",
  "result": -14,
  "input_matrix": [[3, 8], [4, 6]],
  "steps": [
    &#123;
      "explanation": "For 2×2 matrix: det = (a*d) - (b*c)",
      "calculation": "(3*6) - (8*4) = 18 - 32 = -14"
    &#125;
  ]
&#125;</code></pre>
            </div>

            <div class="endpoint">
                <h3>
                    <span class="http-method method-post">POST</span>
                    <code>/api/v1/matrix/inverse</code>
                </h3>
                <p>Compute the inverse of a square matrix (if it exists).</p>

                <h4>Example Request</h4>
                <pre><code>curl -X POST https://calcoralive.netlify.app/api/v1/matrix/inverse \
  -H "Content-Type: application/json" \
  -d '&#123;
    "matrix": [[1, 2], [3, 4]]
  &#125;'</code></pre>

                <h4>Response</h4>
                <pre><code>&#123;
  "operation": "inverse",
  "result": [[-2, 1], [1.5, -0.5]],
  "determinant": -2,
  "steps": [
    &#123;
      "explanation": "Calculate determinant: det(A) = -2",
      "calculation": "(1*4) - (2*3) = -2"
    &#125;,
    &#123;
      "explanation": "Compute adjugate matrix and divide by determinant",
      "result": "A^(-1) = (1/det) * adj(A)"
    &#125;
  ]
&#125;</code></pre>
            </div>

            <div class="endpoint">
                <h3>
                    <span class="http-method method-post">POST</span>
                    <code>/api/v1/matrix/eigenvalues</code>
                </h3>
                <p>Compute eigenvalues and eigenvectors of a square matrix.</p>

                <h4>Example Response</h4>
                <pre><code>&#123;
  "operation": "eigenvalues",
  "eigenvalues": [5.372, -0.372],
  "eigenvectors": [
    [0.824, 0.566],
    [-0.416, 0.909]
  ],
  "characteristic_polynomial": "λ² - 5λ - 2"
&#125;</code></pre>
            </div>

            <div class="endpoint">
                <h3>
                    <span class="http-method method-post">POST</span>
                    <code>/api/v1/matrix/rref</code>
                </h3>
                <p>Compute the Reduced Row Echelon Form of a matrix.</p>

                <h4>Use Cases</h4>
                <ul>
                    <li>Solving systems of linear equations</li>
                    <li>Finding matrix rank</li>
                    <li>Identifying pivot columns</li>
                    <li>Testing linear independence</li>
                </ul>
            </div>

            <div class="info-box">
                <strong>All Matrix Operations Include:</strong>
                <ul style="margin-top: 0.5rem;">
                    <li>Step-by-step explanations</li>
                    <li>Input validation and error handling</li>
                    <li>Support for symbolic arithmetic</li>
                    <li>Numerical precision to 10 decimal places</li>
                </ul>
            </div>
        </section>

        <!-- Python SDK -->
        <section>
            <h2><i class="fab fa-python"></i> Python SDK</h2>
            <p>For Python developers, use the official SDK for easier integration:</p>
            
            <h4>Installation</h4>
            <pre><code>pip install calcora</code></pre>

            <h4>Usage Example</h4>
            <pre><code>from calcora import differentiate, integrate, matrix_determinant

# Differentiation
result = differentiate("x**2 + 3*x", variable="x", verbosity="detailed")
print(result['output'])  # "2*x + 3"

# Indefinite Integration
result = integrate("x**2", variable="x")
print(result['output'])  # "x**3/3 + C"

# Definite Integration
result = integrate("x**2", variable="x", lower_limit=0, upper_limit=2)
print(result['output'])  # "8/3"
print(result['graph']['area']['value'])  # 2.666666666666667

# Matrix Determinant
matrix = [[3, 8], [4, 6]]
result = matrix_determinant(matrix)
print(result['result'])  # -14</code></pre>

            <p>Full Python API documentation: <a href="https://github.com/Dumbo-programmer/Calcora/blob/main/README.md">GitHub README</a></p>
        </section>
    </main>
</Layout>

<style>
    section {
        margin: 3rem 0;
    }

    h2 {
        font-size: 2rem;
        margin: 2rem 0 1rem;
        color: var(--primary);
    }

    h3 {
        font-size: 1.5rem;
        margin: 1.5rem 0 0.75rem;
    }

    h4 {
        font-size: 1.125rem;
        margin: 1.25rem 0 0.5rem;
        color: var(--text-primary);
    }

    .endpoint {
        background: var(--bg-primary);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 2rem;
        margin: 2rem 0;
    }

    .http-method {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 6px;
        font-weight: 700;
        font-size: 0.875rem;
        margin-right: 0.5rem;
    }

    .method-post {
        background: #10b981;
        color: white;
    }

    .required {
        color: var(--error);
        font-weight: 700;
        font-size: 0.75rem;
    }

    .param-table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
        background: var(--bg-primary);
        border-radius: 8px;
        overflow: hidden;
    }

    .param-table th {
        background: var(--bg-tertiary);
        padding: 0.75rem;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid var(--border);
    }

    .param-table td {
        padding: 0.75rem;
        border-bottom: 1px solid var(--border);
    }

    .param-table tr:last-child td {
        border-bottom: none;
    }

    ul, ol {
        margin: 1rem 0;
        padding-left: 2rem;
    }

    li {
        margin: 0.5rem 0;
    }

    a {
        color: var(--primary);
        text-decoration: none;
        transition: color 0.3s ease;
    }

    a:hover {
        color: var(--primary-dark);
        text-decoration: underline;
    }

    .info-box {
        background: var(--bg-secondary);
        border-left: 4px solid var(--primary);
        border-radius: 8px;
        padding: 1.5rem;
        margin: 1.5rem 0;
    }

    .info-box strong {
        color: var(--primary);
        display: block;
        margin-bottom: 0.5rem;
    }

    .info-box ul {
        margin: 0;
        padding-left: 1.5rem;
    }

    .info-box li {
        margin: 0.25rem 0;
    }
</style>
